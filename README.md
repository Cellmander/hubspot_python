# hubspot_python
Código em Python utilizado no Hubspot para definir se um objeto foi criado dentro de horário comercial

O desenvolvimento desse código foi necessário para resolver a seguinte situação: O HubSpot é um CRM (Customer Relationship Management), uma plataforma onde as oportunidades de vendas são registradas e monitoradas, para um maior controle da operação comercial. Nesse contexto, o gerente comercial precisava monitorar quanto tempo passou, desde que o cliente demonstrou interesse se inscrevendo no formulário da Landing Page, até o momento que o vendedor realizou a primeira ligação. Ao longo dos dias da semana, o horário de início do expediente muda, começando às 10h na segunda e quinta, e às 9h30 na terça, quarta e sexta. Deve-se considerar também que um cliente pode se inscrever no formulário fora de horário comercial, e nesse caso, não devemos contar o tempo do atendimento a partir da inscrição do cliente, e sim a partir do horário de início do expediente da empresa. A última questão é que esse código foi inserido dentro de um fluxo de automação da HubSpot, em um módulo específico para códigos personalizados. O problema é que esse módulo de código roda dentro de um servidor da AWS, que está hospedado no Reino Unido, e como estamos tratando de uma comparação de horários, o fuso horário do servidor interfere na avaliação dentro do código, pois os horários de início e fim do expediente serão 3 horas a mais que no Brasil.

Sendo assim, foram necessários dois algoritmos para resolver esse problema. O primeiro deles determina se o cliente se inscreveu dentro do horário comercial ou não, e envia essa informação para uma propriedade. O segundo código está inserido dentro de um fluxo de automação. Esse fluxo inicialmente avalia se o cliente se inscreveu em horário comercial ou não, e caso seja fora do horário, o código será ativado. Esse código primeiramente avalia qual dia da semana e horário foi realizada a inscrição, e define o horário do começo de expediente conforme às regras já explicadas acima. O cálculo do tempo de atendimento não é realizado dentro do código, pois ele já é feito automaticamente pela própria HubSpot.
